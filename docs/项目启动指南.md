# WEBæ–°é—»å‘å¸ƒç³»ç»Ÿ - é¡¹ç›®å¯åŠ¨æŒ‡å—

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### å¿…é¡»å®‰è£…çš„è½¯ä»¶

1. **.NET 7.0 SDK** æˆ–æ›´é«˜ç‰ˆæœ¬
   - ä¸‹è½½åœ°å€ï¼šhttps://dotnet.microsoft.com/download
   - éªŒè¯å®‰è£…ï¼š`dotnet --version`

2. **SQL Server 2019** æˆ–æ›´é«˜ç‰ˆæœ¬
   - SQL Server Expressï¼ˆå…è´¹ç‰ˆï¼‰ï¼šhttps://www.microsoft.com/sql-server/sql-server-downloads
   - æˆ–è€…ä½¿ç”¨ LocalDB

3. **å¼€å‘å·¥å…·ï¼ˆä»»é€‰å…¶ä¸€ï¼‰**
   - Visual Studio 2022ï¼ˆæ¨èï¼‰
   - Visual Studio Code + C# æ‰©å±•
   - JetBrains Rider

4. **Git**ï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰
   - ä¸‹è½½åœ°å€ï¼šhttps://git-scm.com/

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ5åˆ†é’Ÿï¼‰

### æ–¹æ³•1ï¼šä½¿ç”¨ Visual Studioï¼ˆæ¨èæ–°æ‰‹ï¼‰

1. **æ‰“å¼€é¡¹ç›®**
   ```
   åŒå‡» WEBNews.sln æ–‡ä»¶
   ```

2. **è¿˜åŸä¾èµ–åŒ…**
   - Visual Studio ä¼šè‡ªåŠ¨è¿˜åŸ NuGet åŒ…
   - æˆ–è€…å³é”®è§£å†³æ–¹æ¡ˆ â†’ è¿˜åŸ NuGet åŒ…

3. **é…ç½®æ•°æ®åº“è¿æ¥**
   - æ‰“å¼€ `WEBNews.API/appsettings.json`
   - ä¿®æ”¹è¿æ¥å­—ç¬¦ä¸²ï¼ˆè§ä¸‹æ–¹è¯¦ç»†è¯´æ˜ï¼‰

4. **åˆ›å»ºæ•°æ®åº“**
   - æ‰“å¼€"åŒ…ç®¡ç†å™¨æ§åˆ¶å°"ï¼ˆå·¥å…· â†’ NuGet åŒ…ç®¡ç†å™¨ â†’ åŒ…ç®¡ç†å™¨æ§åˆ¶å°ï¼‰
   - è®¾ç½®é»˜è®¤é¡¹ç›®ä¸º `WEBNews.Data`
   - æ‰§è¡Œå‘½ä»¤ï¼š
   ```powershell
   Add-Migration InitialCreate
   Update-Database
   ```

5. **è¿è¡Œé¡¹ç›®**
   - æŒ‰ F5 æˆ–ç‚¹å‡»"å¼€å§‹"æŒ‰é’®
   - æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ Swagger é¡µé¢

### æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤è¡Œ

```bash
# 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git clone [é¡¹ç›®åœ°å€]
cd WEBNews

# 2. è¿˜åŸä¾èµ–
dotnet restore

# 3. é…ç½®æ•°æ®åº“ï¼ˆè§ä¸‹æ–¹è¯¦ç»†è¯´æ˜ï¼‰
# ç¼–è¾‘ WEBNews.API/appsettings.json

# 4. åˆ›å»ºæ•°æ®åº“è¿ç§»
cd WEBNews.API
dotnet ef migrations add InitialCreate --project ../WEBNews.Data
dotnet ef database update --project ../WEBNews.Data

# 5. è¿è¡Œé¡¹ç›®
dotnet run

# 6. æ‰“å¼€æµè§ˆå™¨è®¿é—®
# https://localhost:5001/swagger
```

---

## ğŸ”§ è¯¦ç»†é…ç½®æ­¥éª¤

### 1. é…ç½®æ•°æ®åº“è¿æ¥

æ‰“å¼€ `WEBNews.API/appsettings.json`ï¼š

#### é€‰é¡¹Aï¼šä½¿ç”¨ SQL Serverï¼ˆé»˜è®¤ï¼‰

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=WEBNewsDB;Trusted_Connection=True;TrustServerCertificate=True"
  }
}
```

#### é€‰é¡¹Bï¼šä½¿ç”¨ SQL Server èº«ä»½éªŒè¯

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=WEBNewsDB;User Id=sa;Password=ä½ çš„å¯†ç ;TrustServerCertificate=True"
  }
}
```

#### é€‰é¡¹Cï¼šä½¿ç”¨ LocalDBï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=WEBNewsDB;Trusted_Connection=True;TrustServerCertificate=True"
  }
}
```

### 2. å®‰è£… EF Core å·¥å…·ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰

```bash
# å…¨å±€å®‰è£…
dotnet tool install --global dotnet-ef

# æˆ–æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
dotnet tool update --global dotnet-ef

# éªŒè¯å®‰è£…
dotnet ef --version
```

### 3. åˆ›å»ºæ•°æ®åº“

```bash
# è¿›å…¥ API é¡¹ç›®ç›®å½•
cd WEBNews.API

# åˆ›å»ºè¿ç§»æ–‡ä»¶
dotnet ef migrations add InitialCreate --project ../WEBNews.Data

# åº”ç”¨è¿ç§»ï¼ˆåˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼‰
dotnet ef database update --project ../WEBNews.Data
```

**æˆåŠŸæ ‡å¿—ï¼š**
- çœ‹åˆ° "Done." æ¶ˆæ¯
- SQL Server ä¸­å‡ºç° `WEBNewsDB` æ•°æ®åº“
- æ•°æ®åº“åŒ…å«4ä¸ªè¡¨ï¼šUsers, News, Attachments, NewsReceivers

---

## ğŸ§ª æµ‹è¯•é¡¹ç›®æ˜¯å¦æ­£å¸¸è¿è¡Œ

### 1. å¯åŠ¨é¡¹ç›®

```bash
cd WEBNews.API
dotnet run
```

**çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºæˆåŠŸï¼š**
```
Now listening on: https://localhost:5001
Now listening on: http://localhost:5000
Application started. Press Ctrl+C to shut down.
```

### 2. è®¿é—® Swagger æ–‡æ¡£

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
https://localhost:5001/swagger
```

**åº”è¯¥çœ‹åˆ°ï¼š**
- Swagger UI ç•Œé¢
- API æ¥å£åˆ—è¡¨ï¼ˆAuthã€Newsç­‰ï¼‰

### 3. æµ‹è¯•ç¬¬ä¸€ä¸ªæ¥å£

åœ¨ Swagger é¡µé¢ï¼š

1. æ‰¾åˆ° `/api/auth/register` æ¥å£
2. ç‚¹å‡» "Try it out"
3. è¾“å…¥æµ‹è¯•æ•°æ®ï¼š
   ```json
   {
     "userName": "test",
     "password": "123456",
     "email": "test@example.com",
     "realName": "æµ‹è¯•ç”¨æˆ·"
   }
   ```
4. ç‚¹å‡» "Execute"
5. çœ‹åˆ°è¿”å› 200 çŠ¶æ€ç è¡¨ç¤ºæˆåŠŸ

---

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæ‰¾ä¸åˆ° dotnet å‘½ä»¤

**ç—‡çŠ¶ï¼š**
```
command not found: dotnet
```

**è§£å†³ï¼š**
1. å®‰è£… .NET SDKï¼šhttps://dotnet.microsoft.com/download
2. é‡å¯ç»ˆç«¯
3. éªŒè¯ï¼š`dotnet --version`

---

### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
A network-related or instance-specific error occurred
```

**è§£å†³ï¼š**
1. ç¡®è®¤ SQL Server æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®
3. ä½¿ç”¨ SSMS æµ‹è¯•èƒ½å¦è¿æ¥æ•°æ®åº“
4. ç¡®è®¤é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢è¿æ¥

---

### é—®é¢˜3ï¼šç«¯å£è¢«å ç”¨

**ç—‡çŠ¶ï¼š**
```
Failed to bind to address https://localhost:5001
```

**è§£å†³ï¼š**
- ä¿®æ”¹ `WEBNews.API/Properties/launchSettings.json` ä¸­çš„ç«¯å£å·
- æˆ–åœæ­¢å ç”¨ç«¯å£çš„ç¨‹åº

---

### é—®é¢˜4ï¼šNuGet åŒ…è¿˜åŸå¤±è´¥

**ç—‡çŠ¶ï¼š**
```
error NU1101: Unable to find package
```

**è§£å†³ï¼š**
```bash
# æ¸…é™¤ç¼“å­˜
dotnet nuget locals all --clear

# é‡æ–°è¿˜åŸ
dotnet restore
```

---

### é—®é¢˜5ï¼šEntity Framework è¿ç§»å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
Build failed
```

**è§£å†³ï¼š**
```bash
# å…ˆç¼–è¯‘é¡¹ç›®
dotnet build

# å†æ‰§è¡Œè¿ç§»
dotnet ef migrations add InitialCreate --project ../WEBNews.Data
```

---

### é—®é¢˜6ï¼šSSLè¯ä¹¦é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
The SSL connection could not be established
```

**è§£å†³ï¼š**
```bash
# ä¿¡ä»»å¼€å‘è¯ä¹¦
dotnet dev-certs https --trust
```

---

## ğŸ“± å›¢é˜Ÿæˆå‘˜å…·ä½“æ“ä½œ

### ç‹ä¸–å¼ºï¼ˆç»„é•¿ï¼‰- ç¬¬1å¤©ä¸Šåˆ

1. **åˆå§‹åŒ–é¡¹ç›®**
   ```bash
   # é¡¹ç›®å·²åˆ›å»ºå¥½ï¼Œç›´æ¥æ‰“å¼€
   cd WEBNews
   dotnet restore
   ```

2. **é…ç½®æ•°æ®åº“**
   - ä¿®æ”¹ `appsettings.json` è¿æ¥å­—ç¬¦ä¸²
   - åˆ›å»ºæ•°æ®åº“è¿ç§»
   - æ¨é€åˆ° Git

3. **é€šçŸ¥å›¢é˜Ÿ**
   - åœ¨ç¾¤é‡Œå‘é€é¡¹ç›®åœ°å€
   - å‘ŠçŸ¥æ•°æ®åº“é…ç½®ä¿¡æ¯

### èµµç•…ï¼ˆæŠ€æœ¯æ”¯æŒï¼‰- ç¬¬1å¤©ä¸‹åˆ

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone [é¡¹ç›®åœ°å€]
   cd WEBNews
   dotnet restore
   ```

2. **é…ç½® JWT**
   - æŒ‰ä»»åŠ¡åˆ†é…æ–‡æ¡£å®ŒæˆJWTé…ç½®
   - åˆ›å»ºå·¥å…·ç±»

3. **æµ‹è¯•è¿è¡Œ**
   ```bash
   cd WEBNews.API
   dotnet run
   ```

### æ¬§é˜³/å¿ƒæ€¡/é»„å¥•ï¼ˆå¼€å‘äººå‘˜ï¼‰- ç¬¬1å¤©ä¸‹åˆ

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone [é¡¹ç›®åœ°å€]
   cd WEBNews
   ```

2. **è¿˜åŸä¾èµ–**
   ```bash
   dotnet restore
   ```

3. **é…ç½®æ•°æ®åº“**
   - æ ¹æ®ç»„é•¿æä¾›çš„è¿æ¥å­—ç¬¦ä¸²é…ç½®

4. **åˆ›å»ºæœ¬åœ°æ•°æ®åº“**
   ```bash
   cd WEBNews.API
   dotnet ef database update --project ../WEBNews.Data
   ```

5. **è¿è¡Œæµ‹è¯•**
   ```bash
   dotnet run
   # è®¿é—® https://localhost:5001/swagger
   ```

6. **åˆ›å»ºè‡ªå·±çš„åˆ†æ”¯**
   ```bash
   # æ¬§é˜³
   git checkout -b dev-auth
   
   # å¿ƒæ€¡
   git checkout -b dev-news
   
   # é»„å¥•
   git checkout -b dev-attachment
   ```

---

## ğŸ”„ æ—¥å¸¸å¼€å‘æµç¨‹

### æ¯å¤©å¼€å§‹å·¥ä½œå‰

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. åˆ‡æ¢åˆ°è‡ªå·±çš„åˆ†æ”¯
git checkout dev-yourname

# 3. åˆå¹¶ä¸»åˆ†æ”¯çš„æ›´æ–°
git merge main

# 4. è¿è¡Œé¡¹ç›®æµ‹è¯•
dotnet run --project WEBNews.API
```

### å¼€å‘è¿‡ç¨‹ä¸­

```bash
# 1. ç¼–å†™ä»£ç 
# 2. æœ¬åœ°æµ‹è¯•ï¼ˆä½¿ç”¨ Swaggerï¼‰
# 3. æäº¤ä»£ç 
git add .
git commit -m "[æ¨¡å—å] åŠŸèƒ½æè¿°"
git push origin dev-yourname
```

---

## ğŸ“Š é¡¹ç›®ç›®å½•ç»“æ„

```
WEBNews/
â”œâ”€â”€ WEBNews.sln                # è§£å†³æ–¹æ¡ˆæ–‡ä»¶
â”œâ”€â”€ .gitignore                 # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â”‚
â”œâ”€â”€ WEBNews.API/               # Web API é¡¹ç›® â­
â”‚   â”œâ”€â”€ Controllers/           # æ§åˆ¶å™¨ï¼ˆä½ è¦å†™çš„ï¼‰
â”‚   â”œâ”€â”€ Middleware/            # ä¸­é—´ä»¶ï¼ˆèµµç•…å†™ï¼‰
â”‚   â”œâ”€â”€ Helpers/               # å·¥å…·ç±»ï¼ˆèµµç•…å†™ï¼‰
â”‚   â”œâ”€â”€ appsettings.json       # é…ç½®æ–‡ä»¶ â­
â”‚   â”œâ”€â”€ Program.cs             # å¯åŠ¨æ–‡ä»¶ â­
â”‚   â””â”€â”€ wwwroot/               # é™æ€æ–‡ä»¶
â”‚       â””â”€â”€ uploads/           # ä¸Šä¼ çš„é™„ä»¶
â”‚
â”œâ”€â”€ WEBNews.Models/            # æ•°æ®æ¨¡å‹ â­
â”‚   â”œâ”€â”€ Entities/              # å®ä½“ç±»ï¼ˆæ•°æ®åº“è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ User.cs            # ç”¨æˆ·è¡¨ï¼ˆæ¬§é˜³ï¼‰
â”‚   â”‚   â”œâ”€â”€ News.cs            # æ–°é—»è¡¨ï¼ˆå¿ƒæ€¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ Attachment.cs      # é™„ä»¶è¡¨ï¼ˆé»„å¥•ï¼‰
â”‚   â”‚   â””â”€â”€ NewsReceiver.cs    # æ¥æ”¶äººè¡¨ï¼ˆé»„å¥•ï¼‰
â”‚   â””â”€â”€ DTOs/                  # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚       â”œâ”€â”€ ApiResponse.cs     # ç»Ÿä¸€å“åº”ï¼ˆèµµç•…ï¼‰
â”‚       â”œâ”€â”€ Auth/              # è®¤è¯ç›¸å…³DTO
â”‚       â””â”€â”€ News/              # æ–°é—»ç›¸å…³DTO
â”‚
â”œâ”€â”€ WEBNews.Data/              # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ AppDbContext.cs        # æ•°æ®åº“ä¸Šä¸‹æ–‡ï¼ˆç‹ä¸–å¼ºï¼‰
â”‚   â””â”€â”€ Migrations/            # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚
â”œâ”€â”€ WEBNews.Services/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ AuthService.cs         # è®¤è¯æœåŠ¡ï¼ˆæ¬§é˜³ï¼‰
â”‚   â”œâ”€â”€ NewsService.cs         # æ–°é—»æœåŠ¡ï¼ˆå¿ƒæ€¡ï¼‰
â”‚   â””â”€â”€ AttachmentService.cs   # é™„ä»¶æœåŠ¡ï¼ˆé»„å¥•ï¼‰
â”‚
â””â”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ é¡¹ç›®å¯åŠ¨æŒ‡å—.md        # æœ¬æ–‡æ¡£
    â”œâ”€â”€ ä»»åŠ¡åˆ†é….md
    â”œâ”€â”€ APIæ¥å£è§„èŒƒ.md
    â””â”€â”€ å¼€å‘æµç¨‹å›¾.md
```

---

## âœ… å¯åŠ¨æ£€æŸ¥æ¸…å•

### ç‹ä¸–å¼ºï¼ˆç»„é•¿ï¼‰æ£€æŸ¥æ¸…å•

- [ ] é¡¹ç›®å¯ä»¥æ­£å¸¸ç¼–è¯‘
- [ ] æ•°æ®åº“å¯ä»¥æˆåŠŸåˆ›å»º
- [ ] Swagger å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] Git ä»“åº“å·²åˆå§‹åŒ–
- [ ] ä»£ç å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“
- [ ] å›¢é˜Ÿæˆå‘˜å·²æ·»åŠ åˆ°ä»“åº“

### å›¢é˜Ÿæˆå‘˜æ£€æŸ¥æ¸…å•

- [ ] å·²å®‰è£… .NET SDK
- [ ] å·²å®‰è£… SQL Server
- [ ] å·²å…‹éš†é¡¹ç›®
- [ ] ä¾èµ–åŒ…å·²è¿˜åŸ
- [ ] æ•°æ®åº“è¿æ¥æˆåŠŸ
- [ ] æ•°æ®åº“å·²åˆ›å»º
- [ ] é¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œ
- [ ] å¯ä»¥è®¿é—® Swagger
- [ ] å·²åˆ›å»ºè‡ªå·±çš„åˆ†æ”¯

---

## ğŸ’¡ å°æŠ€å·§

### 1. ä½¿ç”¨ watch æ¨¡å¼ï¼ˆä»£ç è‡ªåŠ¨é‡è½½ï¼‰

```bash
dotnet watch run --project WEBNews.API
```

æ¯æ¬¡ä¿å­˜ä»£ç åè‡ªåŠ¨é‡æ–°ç¼–è¯‘è¿è¡Œã€‚

### 2. æŸ¥çœ‹æ•°æ®åº“

**ä½¿ç”¨ SSMSï¼ˆSQL Server Management Studioï¼‰ï¼š**
- è¿æ¥åˆ° localhost
- æ‰¾åˆ° WEBNewsDB æ•°æ®åº“
- æŸ¥çœ‹è¡¨ç»“æ„å’Œæ•°æ®

**ä½¿ç”¨ Azure Data Studioï¼š**
- å…è´¹è·¨å¹³å°å·¥å…·
- ç•Œé¢æ›´ç°ä»£

### 3. æ¸…ç†é‡å»º

```bash
# æ¸…ç†ç¼–è¯‘æ–‡ä»¶
dotnet clean

# é‡æ–°ç¼–è¯‘
dotnet build

# åˆ é™¤æ•°æ®åº“é‡æ–°åˆ›å»º
dotnet ef database drop --project ../WEBNews.Data
dotnet ef database update --project ../WEBNews.Data
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### é‡åˆ°é—®é¢˜çš„è§£å†³æµç¨‹

1. **æŸ¥çœ‹æœ¬æ–‡æ¡£** - çœ‹çœ‹æ˜¯ä¸æ˜¯å¸¸è§é—®é¢˜
2. **é—® AI** - ChatGPTã€Cursorã€é€šä¹‰åƒé—®
3. **é—®èµµç•…** - æŠ€æœ¯é—®é¢˜ @èµµç•…
4. **é—®ç‹ä¸–å¼º** - åè°ƒé—®é¢˜ @ç‹ä¸–å¼º

### æœ‰ç”¨çš„å‘½ä»¤

```bash
# æŸ¥çœ‹ .NET ç‰ˆæœ¬
dotnet --version

# æŸ¥çœ‹å·²å®‰è£…çš„ SDK
dotnet --list-sdks

# æŸ¥çœ‹é¡¹ç›®ä¿¡æ¯
dotnet --info

# æŸ¥çœ‹ EF Core å·¥å…·ç‰ˆæœ¬
dotnet ef --version

# æŸ¥çœ‹æ‰€æœ‰è¿ç§»è®°å½•
dotnet ef migrations list --project ../WEBNews.Data

# å›æ»šåˆ°ä¸Šä¸€ä¸ªè¿ç§»
dotnet ef database update LastGoodMigration --project ../WEBNews.Data
```

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸ‰

**æ–‡æ¡£ç»´æŠ¤äººï¼šç‹ä¸–å¼º**  
**æœ€åæ›´æ–°ï¼š2025-12-03**

